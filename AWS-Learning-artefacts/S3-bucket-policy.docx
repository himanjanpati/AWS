Problem Statement

Assign an EC2 instance appropriate premission so that it can do the below oerations on the S3 bucket
 1- upload file/create object
 2- Get the files/objects
 3- delete the files/objects


Sol :
------
 1- Create an IAM role with the EC2 managed policy (AmazonEC2FullAccess) attched to it.
 2- Create an IAM policy with the below policy definition for S3

 {
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": "s3:ListAllMyBuckets",
            "Resource": "*"
        },
        {
            "Effect": "Allow",
            "Action": "s3:ListBucket",
            "Resource": "arn:aws:s3:::<bucket-name>"
        },
        {
            "Effect": "Allow",
            "Action": [
                "s3:PutObject",
                "s3:GetObject",
                "s3:DeleteObject"
            ],
            "Resource": "arn:aws:s3:::<bucket-name>/*"
        }
    ]
}


Note - Here though we say to add access only to a specific S3 bucket but we need to add access to list all buckets 
 "Action": "s3:ListAllMyBuckets" else console will through error while doing any operations for s3

3- Attch this manged policy to the IAM role created above for the EC2

4- Launch the EC2 instance attching the above IAM role created.

5- Verify from the EC2 that you should be be able upload/get/delete files only to the specific S3 bucket

aws s3 ls ( will show list of all s3)
aws s3 cp test.json s3://<bucket-name> (will copy/upload a file to s3)
aws s3 ls s3://<bucket-name>  or 
aws s3 ls s3://<bucket-name> --recursive --human-redable --summarize (will list all the files/objects in the s3)
aws s3 rm s3://<bucket-name>/test.json 